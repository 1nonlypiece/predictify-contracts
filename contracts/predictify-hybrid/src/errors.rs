#![allow(dead_code)]

use soroban_sdk::{contracterror, Env};

/// Essential error codes for Predictify Hybrid contract
#[contracterror]
#[derive(Copy, Clone, Debug, Eq, PartialEq, PartialOrd, Ord)]
#[repr(u32)]
pub enum Error {
    // ===== USER OPERATION ERRORS =====
    /// User is not authorized to perform this action
    Unauthorized = 100,
    /// Market not found
    MarketNotFound = 101,
    /// Market is closed (has ended)
    MarketClosed = 102,
    /// Market is already resolved
    MarketAlreadyResolved = 103,
    /// Market is not resolved yet
    MarketNotResolved = 104,
    /// User has nothing to claim
    NothingToClaim = 105,
    /// User has already claimed
    AlreadyClaimed = 106,
    /// Insufficient stake amount
    InsufficientStake = 107,
    /// Invalid outcome choice
    InvalidOutcome = 108,
    /// User has already voted in this market
    AlreadyVoted = 109,

    // ===== ORACLE ERRORS =====
    /// Oracle is unavailable
    OracleUnavailable = 200,
    /// Invalid oracle configuration
    InvalidOracleConfig = 201,

    // ===== VALIDATION ERRORS =====
    /// Invalid question format
    InvalidQuestion = 300,
    /// Invalid outcomes provided
    InvalidOutcomes = 301,
    /// Invalid duration specified
    InvalidDuration = 302,
    /// Invalid threshold value
    InvalidThreshold = 303,
    /// Invalid comparison operator
    InvalidComparison = 304,
}

impl Error {
    /// Get a human-readable description of the error
    pub fn description(&self) -> &'static str {
        match self {
            Error::Unauthorized => "User is not authorized to perform this action",
            Error::MarketNotFound => "Market not found",
            Error::MarketClosed => "Market is closed",
            Error::MarketAlreadyResolved => "Market is already resolved",
            Error::MarketNotResolved => "Market is not resolved yet",
            Error::NothingToClaim => "User has nothing to claim",
            Error::AlreadyClaimed => "User has already claimed",
            Error::InsufficientStake => "Insufficient stake amount",
            Error::InvalidOutcome => "Invalid outcome choice",
            Error::AlreadyVoted => "User has already voted",
            Error::OracleUnavailable => "Oracle is unavailable",
            Error::InvalidOracleConfig => "Invalid oracle configuration",
            Error::InvalidQuestion => "Invalid question format",
            Error::InvalidOutcomes => "Invalid outcomes provided",
            Error::InvalidDuration => "Invalid duration specified",
            Error::InvalidThreshold => "Invalid threshold value",
            Error::InvalidComparison => "Invalid comparison operator",
        }
    }

    /// Get error code as string
    pub fn code(&self) -> &'static str {
        match self {
            Error::Unauthorized => "UNAUTHORIZED",
            Error::MarketNotFound => "MARKET_NOT_FOUND",
            Error::MarketClosed => "MARKET_CLOSED",
            Error::MarketAlreadyResolved => "MARKET_ALREADY_RESOLVED",
            Error::MarketNotResolved => "MARKET_NOT_RESOLVED",
            Error::NothingToClaim => "NOTHING_TO_CLAIM",
            Error::AlreadyClaimed => "ALREADY_CLAIMED",
            Error::InsufficientStake => "INSUFFICIENT_STAKE",
            Error::InvalidOutcome => "INVALID_OUTCOME",
            Error::AlreadyVoted => "ALREADY_VOTED",
            Error::OracleUnavailable => "ORACLE_UNAVAILABLE",
            Error::InvalidOracleConfig => "INVALID_ORACLE_CONFIG",
            Error::InvalidQuestion => "INVALID_QUESTION",
            Error::InvalidOutcomes => "INVALID_OUTCOMES",
            Error::InvalidDuration => "INVALID_DURATION",
            Error::InvalidThreshold => "INVALID_THRESHOLD",
            Error::InvalidComparison => "INVALID_COMPARISON",
        }
    }
}
